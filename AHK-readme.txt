This is the AHK script. Like I want it to, it executes script.bat hidden when I run it, showing only an icon in the tray area. It also has the option to hide/show script.bat's console window in the context menu, and the option to exit script.bat and then itself.
I've noticed, though, that if I exit the console window directly, the AHK script just sits there in the tray, and clicking on Close in the right click menu doesn't do anything. I have to run the script again (causing it to run script.bat again), then click on Close in the context menu. The last part of the script is supposed to prevent this from happening, by checking every second if cmd is running, then exiting itself when it finds that it isn't. What am I doing wrong?